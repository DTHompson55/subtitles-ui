<!DOCTYPE html>
<html>

<head>
<title>STT Demo</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">

<script src="https://code.jquery.com/jquery-1.12.4.js"
	type="text/javascript"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"
	type="text/javascript"></script>

<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="stylesheets/style.css">

<script>
	var CC_Data = {};

	//
	// The main Ajax Function
	//
	var ajaxFunction = function(url, datatype, responseFormatter) {
		var ajaxRequest = {

			// The URL for the request
			url : url,

			// The data to send (will be converted to a query string)
			data : JSON.stringify(CC_Data),

			// Whether this is a POST or GET request
			type : "POST",

			// The type of data we expect back
			dataType : datatype,

			contentType : 'application/json'
		}

		$.ajax(ajaxRequest)
		// Code to run if the request succeeds (is done);
		// The response is passed to the function
		.done(function(response) {
			responseFormatter(response);
		})
		// Code to run if the request fails; the raw request and
		// status codes are passed to the function
		.fail(function(xhr, status, errorThrown) {
			console.log("Sorry, there was a problem!");
			console.log("Error: " + errorThrown);
			console.log("Status: " + status);
			console.dir(xhr);
		})
		// Code to run regardless of success or failure;
		.always(function(xhr, status) {
			console.log("The request is complete!");
		});
	};

	//
	//
	//

	var getFilename = function getFilename() {
		ajaxFunction("/api/getCCData", "text", function(json) {
			console.log(json);
			$("#textarea").text(json);
		});

		ajaxFunction("/api/getFilename", "text", function(json) {
			console.log(json);
			json = JSON.parse(json);
			$("#displayfilename")
					.text("temporary file name = " + json.filename);
			$("#video").attr('src', json.filename);
			$("#track").attr('src', json.filename + ".vtt");
		})
	}

	$(function() {
		console.log("This is the viewResults Page");
		getFilename();
	});
</script>
</head>
<body>
	<h1 id="message">Subtitler - Step 5) Submit Closed Captions to
		Streaming Service</h1>

	<div class="container">
		<div class="row">
			<div class="col-xs-12">
				<h2>At this point the video has been transcribed using Watson
					Speech to Text services and some Node-Red service orchestration.
					The next step would be to upload the transcript to a streaming
					service such as IBM Video Cloud, YouTube, or some other streaming
					service by calling their appropriate APIs. Or copy/paste the
					transcript to the service of your choice.</h2>
			</div>
		</div>
		<div class="row">

			<div class="col-xs-10">
				<textarea id="textarea" name="textarea" minheight="640px"><b>My contents are from <u><span
							style="color: rgb(0, 148, 133);">TEXTAREA</span></u></b></textarea>

			</div>
			<div class="col-xs-2">
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			<br>
			
			</div>
			
		</div>
	</div>
</body>
</html>
